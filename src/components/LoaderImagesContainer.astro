---
import { Image } from "astro:assets";

import {
  image01,
  image02,
  image03,
  image04,
  image05,
  image06,
  image07,
} from "@pages/images";
---

<div class="w-full flex items-center justify-center opacity-0 scale-90 relative" id="images-container">
  <Image
    id="image-1"
    src={image01}
    alt="imagen de programación"
    width={300}
    height={300}
    class="w-56 h-100 object-cover scale-70 absolute z-10 rounded"
  />
  <Image
    id="image-2"
    src={image02}
    alt="imagen de programación"
    width={300}
    height={300}
    class="w-56 h-100 object-cover scale-80 absolute z-20 rounded"
  />
  <Image
    id="image-3"
    src={image03}
    alt="imagen de programación"
    width={300}
    height={300}
    class="w-56 h-100 object-cover scale-90 absolute z-30 rounded"
  />
  <Image
    id="image-4"
    src={image04}
    alt="imagen de programación"
    width={300}
    height={300}
    class="w-56 h-100 object-cover absolute z-40 rounded"
  />
  <Image
    id="image-5"
    src={image05}
    alt="imagen de programación"
    width={300}
    height={300}
    class="w-56 h-100 object-cover scale-90 z-30 rounded"
  />
  <Image
    id="image-6"
    src={image06}
    alt="imagen de programación"
    width={300}
    height={300}
    class="w-56 h-100 object-cover scale-80 absolute z-20 rounded"
  />
  <Image
    id="image-7"
    src={image07}
    alt="imagen de programación"
    width={300}
    height={300}
    class="w-56 h-100 object-cover scale-70 absolute z-10 rounded"
  />
</div>

<script>
  import gsap from "gsap";

  interface ReturnAnimation {
    name: string;
    position: string | number;
  }

  const returnAnimation: ReturnAnimation = {
    name: 'return',
    position: '+=1.4',
  }

  const animImageDuration: number = 1.2;
  const animStartDelay: number = 1;

  // ? Contenedor de imagenes
  const tl = gsap.timeline();


  tl.to("#images-container", {
    opacity: 1,
    scale: 1,
    duration: 1.2,
    delay: 0.5,
    ease: "power2.out",
  }).to("#images-container", {
    opacity: 0,
    scale: 0.9,
    duration: 1.2,
    delay: 2.5,
    ease: "power2.out",
  });

  // * Primeros elementos
  const firstElements = gsap.timeline();

  firstElements.to("#image-3", {
    x: -160,
    duration: animImageDuration,
    delay: animStartDelay,
    ease: "power2.out",
  }).to("#image-5", {
    x: 160,
    duration: animImageDuration,
    delay: animStartDelay,
    ease: "power2.out",
  }, 0).add(returnAnimation.name, returnAnimation.position)
  .to("#image-3", {
    x: 0,
    duration: animImageDuration,
    ease: "power2.inOut",
  }, 'return').to("#image-5", {
    x: 0,
    duration: animImageDuration,
    ease: "power2.inOut",
  }, 'return')

  // ? Ultimos elementos
  const secondElements = gsap.timeline();

  secondElements.to("#image-6", {
    x: -250,
    duration: animImageDuration,
    delay: animStartDelay,
    ease: "power2.out",
  }).to("#image-2", {
    x: 250,
    duration: animImageDuration,
    delay: animStartDelay,
    ease: "power2.out",
  }, 0)
  .add(returnAnimation.name, returnAnimation.position)
  .to("#image-6", {
    x: 0,
    duration: animImageDuration,
    ease: "power2.inOut",
  }, 'return')
  .to("#image-2", {
    x: 0,
    duration: animImageDuration,
    ease: "power2.inOut",
  }, 'return');

  const thirdElements = gsap.timeline();

  thirdElements.to("#image-7", {
    x: -320,
    duration: animImageDuration,
    delay: animStartDelay,
    ease: "power2.out",
  }).to("#image-1", {
    x: 320,
    duration: animImageDuration,
    delay: animStartDelay,
    ease: "power2.out",
  }, 0)
  .add(returnAnimation.name, returnAnimation.position)
  .to("#image-7", {
    x: 0,
    duration: animImageDuration,
    ease: "power2.inOut",
  }, 'return')
  .to("#image-1", {
    x: 0,
    duration: animImageDuration,
    ease: "power2.inOut",
  }, 'return');
</script>
